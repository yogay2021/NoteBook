## 调研以及文献综述

此次象棋视觉识别项目的技术流程简述为：

 

1. 摄像机标定
2. 识别模型构建
3. 图像预处理
4. 对于棋子的识别
5. 对于棋子的精确定位

双目摄像头的基本原理

为了获取棋子坐标，我们通过双目摄像头基于视觉差异以及三角法原理，实现三维信息的获取，在两个摄像头以及被测量棋子之间构成一个三角形，通过已知的两个摄像头的位置，可以求解被测棋子的三维坐标。

![img](https://yoga-typora-photo.oss-cn-beijing.aliyuncs.com/typora_img/clip_image002.png)

对摄像机的标定

为了确定棋子的空间坐标参数，我们需要基于摄像机的内参以及外参的几何模型，这一几何模型是对真实的摄像机的几何抽象化，而获取这些参数并构建模型的过程就是摄像机的标定过程。

![img](https://yoga-typora-photo.oss-cn-beijing.aliyuncs.com/typora_img/clip_image004.png)

在标定过程中，棋子的坐标经历四次变换，从棋子的世界坐标系变换为摄像机坐标系，再由摄像机坐标系变换为无失真的图像坐标系，由无失真的图像坐标系变换为带有切向畸变的实际图像坐标系，最后变换为计算机中的图像坐标系。

在标定中需要确定的参数分别是摄像机的外部参数以及内部参数。外部参数表征了摄像机在世界坐标系中的位置以及方位，一般使用旋转矩阵以及平移向量表示。内部参数只与摄像机的内部结构有关系，包括主点坐标，u轴以及v轴的尺度因子，透镜的倾斜因子等。

图像预处理

摄像机采集到的图像信息需要进行一定的预处理才能达到特定的使用要求。在对象棋的识别任务中，我们使用了灰度化，滤波以及平滑锐化的图像预处理操作。处理后，抑制了全图的噪点，并且改善图像质量，实现对图像的增强效果。

对棋子的识别

对于象棋的识别模型我们拆解为主要对象棋中字符的准确识别，首先我们需要构建神经网络，拍摄一定数量的象棋图像作为数据集用于神经网络模型的训练学习，然后将训练得到的模型文件用于在线对棋子的识别中。在线识别中，根据预处理后的图像，逐行逐列的遍历棋盘，提取出每一个字符，根据预先的训练文件进行棋子种类的识别。

对于棋子坐标的定位

取定棋盘的左上角为原点，需要将图像坐标转换为实际的棋盘坐标。水平方向记为X轴，垂直方向记为Y轴，求解棋盘和图像在X,Y方向的比例系数，通过下面算法将棋盘坐标映射到图像坐标中：

![img](https://yoga-typora-photo.oss-cn-beijing.aliyuncs.com/typora_img/clip_image006.png)

查阅文献列表

[1]肖中凯. 智能象棋机器人双目视觉系统的研究[D].北方工业大学,2008.

[2]杜俊俐,张景飞,黄心汉.基于视觉的象棋棋盘识别[J].计算机工程与应用,2007(34):220-222+232.

[3]王殿君.基于视觉的中国象棋棋子识别定位技术[J].清华大学学报(自然科学版),2013,53(08):1145-1149.DOI:10.16511/j.cnki.qhdxxb.2013.08.019.



## 角点检测

使用Harris 角点检测器：

> https://zhuanlan.zhihu.com/p/83064609

原理：

> **角点在任意一个方向上做微小移动，都会引起该区域的梯度图的方向和幅值发生很大变化。**
>
> 也就是一阶导数(即灰度图的梯度)中的局部最大所对应的像素点就是角点。
>
> 于是我们可以利用这一点来检测角点。
>
> 使一个固定尺寸的窗口在图像上某个位置以任意方向做微小滑动，如果窗口内的灰度值（在梯度图上）都有较大的变化，那么这个窗口所在区域就存在角点。
>
> 这样就可以将 Harris 角点检测算法分为以下三步：
>
> 1. 当窗口（小的图像片段）同时向 x 和 y 两个方向移动时，计算窗口内部的像素值变化量 ；
> 2. 对于每个窗口，都计算其对应的一个角点响应函数 R；
> 3. 然后对该函数进行阈值处理，如果 R > threshold，表示该窗口对应一个角点特征





